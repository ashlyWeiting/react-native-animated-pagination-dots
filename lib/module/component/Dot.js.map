{"version":3,"names":["React","useEffect","useMemo","useState","Animated","TouchableOpacity","usePrevious","EmptyDot","getDotStyle","Dot","props","animVal","Value","animate","setAnimate","type","setType","idx","curPage","maxPage","dotColor","setDotColor","activeColor","inactiveColor","prevType","prevDotColor","nextType","nextAnimate","size","opacity","setValue","timing","toValue","duration","useNativeDriver","start","animStyle","interpolate","inputRange","outputRange","sizeRatio","backgroundColor","width","height","borderRadius","createElement","onPress","_props$onPress","call","View","style","margin"],"sources":["Dot.js"],"sourcesContent":["/**\n *\n * Created by rouge on 11/09/2019.\n * Converted to Typescript on 14/07/2020.\n * Converted to Functional component. on 21/09/2021\n */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Animated, TouchableOpacity } from 'react-native';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport EmptyDot from './EmptyDot';\nimport { getDotStyle } from '../util/DotUtils';\nconst Dot = (props) => {\n    const [animVal] = useState(new Animated.Value(0));\n    const [animate, setAnimate] = useState(false);\n    const [type, setType] = useState(() => getDotStyle({\n        idx: props.idx,\n        curPage: props.curPage,\n        maxPage: props.maxPage,\n    }));\n    const [dotColor, setDotColor] = useState(() => {\n        if (props.curPage === props.idx) {\n            //its current active page now\n            return props.activeColor;\n        }\n        return props.inactiveColor ?? props.activeColor;\n    });\n    const prevType = usePrevious(type);\n    const prevDotColor = usePrevious(dotColor);\n    useEffect(() => {\n        const nextType = getDotStyle({\n            idx: props.idx,\n            curPage: props.curPage,\n            maxPage: props.maxPage,\n        });\n        const nextAnimate = nextType.size !== (prevType?.size || 3) ||\n            nextType.opacity !== (prevType?.opacity || 0.2);\n        if (props.curPage === props.idx) {\n            setDotColor(props.activeColor);\n        }\n        else {\n            setDotColor(props.inactiveColor ?? props.activeColor);\n        }\n        setType(nextType);\n        setAnimate(nextAnimate);\n    }, [\n        prevType?.opacity,\n        prevType?.size,\n        props.activeColor,\n        props.curPage,\n        props.idx,\n        props.inactiveColor,\n        props.maxPage,\n    ]);\n    useEffect(() => {\n        if (!animate)\n            return;\n        animVal.setValue(0);\n        Animated.timing(animVal, {\n            toValue: 1,\n            duration: 300,\n            useNativeDriver: false,\n        }).start();\n    }, [animVal, animate, prevType, type]);\n    const animStyle = useMemo(() => {\n        const size = animVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [\n                (prevType?.size || 3) * props.sizeRatio,\n                type.size * props.sizeRatio,\n            ],\n        });\n        const backgroundColor = animVal.interpolate({\n            inputRange: [0, 1],\n            outputRange: [prevDotColor ?? props.activeColor, dotColor],\n        });\n        return {\n            width: size,\n            height: size,\n            backgroundColor,\n            borderRadius: animVal.interpolate({\n                inputRange: [0, 1],\n                outputRange: [\n                    (prevType?.size || 3) * props.sizeRatio * 0.5,\n                    type.size * props.sizeRatio * 0.5,\n                ],\n            }),\n            opacity: animVal.interpolate({\n                inputRange: [0, 1],\n                outputRange: [prevType?.opacity || 0.2, type.opacity],\n            }),\n        };\n    }, [\n        animVal,\n        dotColor,\n        prevDotColor,\n        prevType?.opacity,\n        prevType?.size,\n        props.activeColor,\n        props.sizeRatio,\n        type.opacity,\n        type.size,\n    ]);\n    if (props.curPage < 3) {\n        if (props.idx >= 5)\n            return React.createElement(EmptyDot, { sizeRatio: props.sizeRatio });\n    }\n    else if (props.curPage < 4) {\n        if (props.idx > 5)\n            return React.createElement(EmptyDot, { sizeRatio: props.sizeRatio });\n    }\n    return (React.createElement(TouchableOpacity, { onPress: () => {\n            props.onPress?.(props.idx);\n        } },\n        React.createElement(Animated.View, { style: [\n                {\n                    margin: 3 * props.sizeRatio,\n                },\n                animStyle,\n            ] })));\n};\nexport default Dot;\n"],"mappings":"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","ignoreList":[]}