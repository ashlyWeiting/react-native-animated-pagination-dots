{"version":3,"names":["React","useEffect","useMemo","useState","Animated","TouchableOpacity","usePrevious","EmptyDot","getDotStyle","Dot","props","animVal","Value","animate","setAnimate","type","setType","idx","curPage","maxPage","dotColor","setDotColor","activeColor","inactiveColor","prevType","prevDotColor","nextType","nextAnimate","size","opacity","setValue","timing","toValue","duration","useNativeDriver","start","animStyle","interpolate","inputRange","outputRange","sizeRatio","backgroundColor","width","height","borderRadius","createElement","_extends","getAccessibilityProps","onPress","_props$onPress","call","View","style","margin"],"sources":["Dot.tsx"],"sourcesContent":["/**\n *\n * Created by rouge on 11/09/2019.\n * Converted to Typescript on 14/07/2020.\n * Converted to Functional component. on 21/09/2021\n */\nimport React, { useEffect, useMemo, useState } from 'react';\nimport { Animated, TouchableOpacity } from 'react-native';\nimport usePrevious from 'react-use/lib/usePrevious';\nimport EmptyDot from './EmptyDot';\nimport { getDotStyle } from '../util/DotUtils';\nimport { IDotContainerProps } from 'react-native-animated-pagination-dot';\n\nconst Dot: React.FC<\n  {\n    idx: number;\n    curPage: number;\n    maxPage: number;\n    activeColor: string;\n    inactiveColor?: string;\n    sizeRatio: number;\n  } & Pick<IDotContainerProps, 'onPress' | 'getAccessibilityProps'>\n> = (props) => {\n  const [animVal] = useState(new Animated.Value(0));\n  const [animate, setAnimate] = useState(false);\n  const [type, setType] = useState(() =>\n    getDotStyle({\n      idx: props.idx,\n      curPage: props.curPage,\n      maxPage: props.maxPage,\n    })\n  );\n\n  const [dotColor, setDotColor] = useState<string>(() => {\n    if (props.curPage === props.idx) {\n      //its current active page now\n      return props.activeColor;\n    }\n\n    return props.inactiveColor ?? props.activeColor;\n  });\n\n  const prevType = usePrevious(type);\n  const prevDotColor = usePrevious<string>(dotColor);\n\n  useEffect(() => {\n    const nextType = getDotStyle({\n      idx: props.idx,\n      curPage: props.curPage,\n      maxPage: props.maxPage,\n    });\n\n    const nextAnimate =\n      nextType.size !== (prevType?.size || 3) ||\n      nextType.opacity !== (prevType?.opacity || 0.2);\n    if (props.curPage === props.idx) {\n      setDotColor(props.activeColor);\n    } else {\n      setDotColor(props.inactiveColor ?? props.activeColor);\n    }\n\n    setType(nextType);\n    setAnimate(nextAnimate);\n  }, [\n    prevType?.opacity,\n    prevType?.size,\n    props.activeColor,\n    props.curPage,\n    props.idx,\n    props.inactiveColor,\n    props.maxPage,\n  ]);\n\n  useEffect(() => {\n    if (!animate) return;\n\n    animVal.setValue(0);\n    Animated.timing(animVal, {\n      toValue: 1,\n      duration: 300,\n      useNativeDriver: false,\n    }).start();\n  }, [animVal, animate, prevType, type]);\n\n  const animStyle = useMemo(() => {\n    const size = animVal.interpolate({\n      inputRange: [0, 1],\n      outputRange: [\n        (prevType?.size || 3) * props.sizeRatio,\n        type.size * props.sizeRatio,\n      ],\n    });\n\n    const backgroundColor = animVal.interpolate({\n      inputRange: [0, 1],\n      outputRange: [prevDotColor ?? props.activeColor, dotColor],\n    });\n\n    return {\n      width: size,\n      height: size,\n      backgroundColor,\n      borderRadius: animVal.interpolate({\n        inputRange: [0, 1],\n        outputRange: [\n          (prevType?.size || 3) * props.sizeRatio * 0.5,\n          type.size * props.sizeRatio * 0.5,\n        ],\n      }),\n      opacity: animVal.interpolate({\n        inputRange: [0, 1],\n        outputRange: [prevType?.opacity || 0.2, type.opacity],\n      }),\n    };\n  }, [\n    animVal,\n    dotColor,\n    prevDotColor,\n    prevType?.opacity,\n    prevType?.size,\n    props.activeColor,\n    props.sizeRatio,\n    type.opacity,\n    type.size,\n  ]);\n\n  if (props.curPage < 3) {\n    if (props.idx >= 5) return <EmptyDot sizeRatio={props.sizeRatio} />;\n  } else if (props.curPage < 4) {\n    if (props.idx > 5) return <EmptyDot sizeRatio={props.sizeRatio} />;\n  }\n\n  return (\n    <TouchableOpacity\n      {...(props.getAccessibilityProps &&\n        props.getAccessibilityProps(props.idx))}\n      onPress={() => {\n        props.onPress?.(props.idx);\n      }}\n    >\n      <Animated.View\n        style={[\n          {\n            margin: 3 * props.sizeRatio,\n          },\n          animStyle,\n        ]}\n      />\n    </TouchableOpacity>\n  );\n};\n\nexport default Dot;\n"],"mappings":"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","ignoreList":[]}