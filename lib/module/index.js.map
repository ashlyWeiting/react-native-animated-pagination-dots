{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","ScrollView","View","StyleSheet","Dot","EmptyDot","defaultEmptyDotSize","usePrevious","ONE_EMPTY_DOT_SIZE","DotContainer","props","refScrollView","prevPage","curPage","getSizeRatio","sizeRatio","Math","max","scrollTo","index","animated","current","FIRST_EMPTY_DOT_SPACE","MOVE_DISTANCE","moveTo","vertical","x","y","getContainerStyle","containerSize","alignItems","flexDirection","maxHeight","undefined","maxWidth","maxPage","activeDotColor","inactiveDotColor","list","Array","keys","normalizedPage","container","createElement","style","map","i","key","idx","activeColor","inactiveColor","onLayout","ref","contentContainerStyle","styles","scrollViewContainer","bounces","horizontal","scrollEnabled","showsVerticalScrollIndicator","showsHorizontalScrollIndicator","onPress","create"],"sources":["index.js"],"sourcesContent":["/**\n *\n * Created by rouge on 11/09/2019.\n * Converted to Typescript on 14/07/2020.\n * Converted to Functional component. on 21/09/2021\n */\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport { ScrollView, View, StyleSheet } from 'react-native';\nimport Dot from './component/Dot';\nimport EmptyDot, { defaultEmptyDotSize } from './component/EmptyDot';\nimport usePrevious from 'react-use/lib/usePrevious';\nconst ONE_EMPTY_DOT_SIZE = defaultEmptyDotSize * defaultEmptyDotSize;\nconst DotContainer = (props) => {\n  const refScrollView = useRef(null);\n  const prevPage = usePrevious(props.curPage);\n  const getSizeRatio = useCallback(() => {\n    if (!props.sizeRatio) return 1.0;\n    return Math.max(1.0, props.sizeRatio);\n  }, [props.sizeRatio]);\n  const scrollTo = useCallback(\n    (index, animated = true) => {\n      if (!refScrollView.current) return;\n      const sizeRatio = getSizeRatio();\n      const FIRST_EMPTY_DOT_SPACE = ONE_EMPTY_DOT_SIZE * 2;\n      const MOVE_DISTANCE = ONE_EMPTY_DOT_SIZE * sizeRatio;\n      const moveTo = Math.max(\n        0,\n        FIRST_EMPTY_DOT_SPACE + (index - 4) * MOVE_DISTANCE\n      );\n      if (props.vertical) {\n        refScrollView.current.scrollTo({\n          x: 0,\n          y: moveTo,\n          animated,\n        });\n        return;\n      }\n      refScrollView.current.scrollTo({\n        x: moveTo,\n        y: 0,\n        animated,\n      });\n    },\n    [getSizeRatio, props.vertical]\n  );\n  const getContainerStyle = useCallback(() => {\n    const { vertical } = props;\n    const sizeRatio = getSizeRatio();\n    const containerSize = 84 * sizeRatio;\n    return {\n      alignItems: 'center',\n      flexDirection: vertical ? 'column' : 'row',\n      maxHeight: vertical ? containerSize : undefined,\n      maxWidth: vertical ? undefined : containerSize,\n    };\n  }, [getSizeRatio, props]);\n  useEffect(() => {\n    if (props.maxPage > 4 && prevPage !== props.curPage)\n      scrollTo(props.curPage);\n  }, [prevPage, props.curPage, props.maxPage, scrollTo]);\n  const { curPage, maxPage, activeDotColor, inactiveDotColor } = props;\n  const list = useMemo(() => [...Array(maxPage).keys()], [maxPage]);\n  let normalizedPage = curPage;\n  if (curPage < 0) {\n    normalizedPage = 0;\n  }\n  if (curPage > maxPage - 1) {\n    normalizedPage = maxPage - 1;\n  }\n  const sizeRatio = getSizeRatio();\n  const container = getContainerStyle();\n  if (maxPage < 5) {\n    return React.createElement(\n      View,\n      { style: container },\n      list.map((i) => {\n        return React.createElement(Dot, {\n          key: i,\n          idx: i,\n          sizeRatio: sizeRatio,\n          curPage: normalizedPage,\n          maxPage: maxPage,\n          activeColor: activeDotColor,\n          inactiveColor: inactiveDotColor,\n        });\n      })\n    );\n  }\n  return React.createElement(\n    View,\n    {\n      style: container,\n      onLayout: () => {\n        // scroll to right index on initial render\n        scrollTo(props.curPage, false);\n      },\n    },\n    React.createElement(\n      ScrollView,\n      {\n        ref: refScrollView,\n        contentContainerStyle: styles.scrollViewContainer,\n        bounces: false,\n        horizontal: !props.vertical,\n        scrollEnabled: false,\n        showsVerticalScrollIndicator: false,\n        showsHorizontalScrollIndicator: false,\n      },\n      React.createElement(EmptyDot, { sizeRatio: sizeRatio }),\n      React.createElement(EmptyDot, { sizeRatio: sizeRatio }),\n      list.map((i) => {\n        return React.createElement(Dot, {\n          sizeRatio: sizeRatio,\n          key: i,\n          idx: i,\n          curPage: normalizedPage,\n          maxPage: maxPage,\n          activeColor: activeDotColor,\n          inactiveColor: inactiveDotColor,\n          onPress: props.onPress,\n        });\n      }),\n      React.createElement(EmptyDot, { sizeRatio: sizeRatio }),\n      React.createElement(EmptyDot, { sizeRatio: sizeRatio })\n    )\n  );\n};\nconst styles = StyleSheet.create({\n  scrollViewContainer: {\n    alignItems: 'center',\n  },\n});\nexport default DotContainer;\n"],"mappings":"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","ignoreList":[]}