{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","ScrollView","View","StyleSheet","Dot","EmptyDot","defaultEmptyDotSize","usePrevious","ONE_EMPTY_DOT_SIZE","DotContainer","props","refScrollView","prevPage","curPage","getSizeRatio","sizeRatio","Math","max","scrollTo","index","animated","current","FIRST_EMPTY_DOT_SPACE","MOVE_DISTANCE","moveTo","vertical","x","y","getContainerStyle","containerSize","alignItems","flexDirection","maxHeight","undefined","maxWidth","maxPage","activeDotColor","inactiveDotColor","list","Array","keys","normalizedPage","container","createElement","style","map","i","key","idx","activeColor","inactiveColor","accessibilityProps","onPress","onLayout","ref","contentContainerStyle","styles","scrollViewContainer","bounces","horizontal","scrollEnabled","showsVerticalScrollIndicator","showsHorizontalScrollIndicator","create"],"sources":["index.tsx"],"sourcesContent":["/**\n *\n * Created by rouge on 11/09/2019.\n * Converted to Typescript on 14/07/2020.\n * Converted to Functional component. on 21/09/2021\n */\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport {\n  ScrollView,\n  View,\n  ViewStyle,\n  StyleProp,\n  StyleSheet,\n  AccessibilityProps,\n} from 'react-native';\nimport Dot from './component/Dot';\nimport EmptyDot, { defaultEmptyDotSize } from './component/EmptyDot';\nimport usePrevious from 'react-use/lib/usePrevious';\n\nexport interface IDotContainerProps {\n  curPage: number;\n  maxPage: number;\n  sizeRatio?: number;\n  activeDotColor: string;\n  inactiveDotColor?: string;\n  vertical?: boolean;\n  accessibilityProps?: AccessibilityProps;\n  onPress?: (idx: number) => void;\n}\n\nconst ONE_EMPTY_DOT_SIZE = defaultEmptyDotSize * defaultEmptyDotSize;\n\nconst DotContainer: React.FC<IDotContainerProps> = (props) => {\n  const refScrollView = useRef<ScrollView>(null);\n  const prevPage = usePrevious(props.curPage);\n\n  const getSizeRatio = useCallback<() => number>(() => {\n    if (!props.sizeRatio) return 1.0;\n\n    return Math.max(1.0, props.sizeRatio);\n  }, [props.sizeRatio]);\n\n  const scrollTo = useCallback<(index: number, animated?: boolean) => void>(\n    (index, animated = true) => {\n      if (!refScrollView.current) return;\n\n      const sizeRatio = getSizeRatio();\n      const FIRST_EMPTY_DOT_SPACE = ONE_EMPTY_DOT_SIZE * 2;\n      const MOVE_DISTANCE = ONE_EMPTY_DOT_SIZE * sizeRatio;\n\n      const moveTo = Math.max(\n        0,\n        FIRST_EMPTY_DOT_SPACE + (index - 4) * MOVE_DISTANCE\n      );\n\n      if (props.vertical) {\n        refScrollView.current.scrollTo({\n          x: 0,\n          y: moveTo,\n          animated,\n        });\n        return;\n      }\n\n      refScrollView.current.scrollTo({\n        x: moveTo,\n        y: 0,\n        animated,\n      });\n    },\n    [getSizeRatio, props.vertical]\n  );\n\n  const getContainerStyle = useCallback<() => StyleProp<ViewStyle>>(() => {\n    const { vertical } = props;\n    const sizeRatio = getSizeRatio();\n    const containerSize = 84 * sizeRatio;\n\n    return {\n      alignItems: 'center',\n      flexDirection: vertical ? 'column' : 'row',\n      maxHeight: vertical ? containerSize : undefined,\n      maxWidth: vertical ? undefined : containerSize,\n    };\n  }, [getSizeRatio, props]);\n\n  useEffect(() => {\n    if (props.maxPage > 4 && prevPage !== props.curPage)\n      scrollTo(props.curPage);\n  }, [prevPage, props.curPage, props.maxPage, scrollTo]);\n\n  const { curPage, maxPage, activeDotColor, inactiveDotColor } = props;\n  const list = useMemo(() => [...Array(maxPage).keys()], [maxPage]);\n\n  let normalizedPage = curPage;\n  if (curPage < 0) {\n    normalizedPage = 0;\n  }\n\n  if (curPage > maxPage - 1) {\n    normalizedPage = maxPage - 1;\n  }\n  const sizeRatio = getSizeRatio();\n\n  const container = getContainerStyle();\n\n  if (maxPage < 5) {\n    return (\n      <View style={container}>\n        {list.map((i) => {\n          return (\n            <Dot\n              key={i}\n              idx={i}\n              sizeRatio={sizeRatio}\n              curPage={normalizedPage}\n              maxPage={maxPage}\n              activeColor={activeDotColor}\n              inactiveColor={inactiveDotColor}\n              accessibilityProps={props.accessibilityProps}\n              onPress={props.onPress}\n            />\n          );\n        })}\n      </View>\n    );\n  }\n\n  return (\n    <View\n      style={container}\n      onLayout={() => {\n        // scroll to right index on initial render\n        scrollTo(props.curPage, false);\n      }}\n    >\n      <ScrollView\n        ref={refScrollView}\n        contentContainerStyle={styles.scrollViewContainer}\n        bounces={false}\n        horizontal={!props.vertical}\n        scrollEnabled={false}\n        showsVerticalScrollIndicator={false}\n        showsHorizontalScrollIndicator={false}\n      >\n        {/* previous empty dummy dot */}\n        <EmptyDot sizeRatio={sizeRatio} />\n        <EmptyDot sizeRatio={sizeRatio} />\n\n        {list.map((i) => {\n          return (\n            <Dot\n              sizeRatio={sizeRatio}\n              key={i}\n              idx={i}\n              curPage={normalizedPage}\n              maxPage={maxPage}\n              activeColor={activeDotColor}\n              inactiveColor={inactiveDotColor}\n              accessibilityProps={props.accessibilityProps}\n              onPress={props.onPress}\n            />\n          );\n        })}\n\n        {/* previous empty dummy dot */}\n        <EmptyDot sizeRatio={sizeRatio} />\n        <EmptyDot sizeRatio={sizeRatio} />\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  scrollViewContainer: {\n    alignItems: 'center',\n  },\n});\n\nexport default DotContainer;\n"],"mappings":"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","ignoreList":[]}