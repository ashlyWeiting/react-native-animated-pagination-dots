{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_Dot","_interopRequireDefault","_EmptyDot","_usePrevious","e","__esModule","default","_getRequireWildcardCache","WeakMap","r","t","has","get","n","__proto__","a","Object","defineProperty","getOwnPropertyDescriptor","u","hasOwnProperty","call","i","set","ONE_EMPTY_DOT_SIZE","defaultEmptyDotSize","DotContainer","props","refScrollView","useRef","prevPage","usePrevious","curPage","getSizeRatio","useCallback","sizeRatio","Math","max","scrollTo","index","animated","current","FIRST_EMPTY_DOT_SPACE","MOVE_DISTANCE","moveTo","vertical","x","y","getContainerStyle","containerSize","alignItems","flexDirection","maxHeight","undefined","maxWidth","useEffect","maxPage","activeDotColor","inactiveDotColor","list","useMemo","Array","keys","normalizedPage","container","createElement","View","style","map","key","idx","activeColor","inactiveColor","onLayout","ScrollView","ref","contentContainerStyle","styles","scrollViewContainer","bounces","horizontal","scrollEnabled","showsVerticalScrollIndicator","showsHorizontalScrollIndicator","onPress","StyleSheet","create","_default","exports"],"sources":["index.tsx"],"sourcesContent":["/**\n *\n * Created by rouge on 11/09/2019.\n * Converted to Typescript on 14/07/2020.\n * Converted to Functional component. on 21/09/2021\n */\nimport React, { useCallback, useEffect, useMemo, useRef } from 'react';\nimport {\n  ScrollView,\n  View,\n  ViewStyle,\n  StyleProp,\n  StyleSheet,\n} from 'react-native';\nimport Dot from './component/Dot';\nimport EmptyDot, { defaultEmptyDotSize } from './component/EmptyDot';\nimport usePrevious from 'react-use/lib/usePrevious';\n\nexport interface IDotContainerProps {\n  curPage: number;\n  maxPage: number;\n  sizeRatio?: number;\n  activeDotColor: string;\n  inactiveDotColor?: string;\n  vertical?: boolean;\n  onPress?: (idx: number) => void;\n}\n\nconst ONE_EMPTY_DOT_SIZE = defaultEmptyDotSize * defaultEmptyDotSize;\n\nconst DotContainer: React.FC<IDotContainerProps> = (props) => {\n  const refScrollView = useRef<ScrollView>(null);\n  const prevPage = usePrevious(props.curPage);\n\n  const getSizeRatio = useCallback<() => number>(() => {\n    if (!props.sizeRatio) return 1.0;\n\n    return Math.max(1.0, props.sizeRatio);\n  }, [props.sizeRatio]);\n\n  const scrollTo = useCallback<(index: number, animated?: boolean) => void>(\n    (index, animated = true) => {\n      if (!refScrollView.current) return;\n\n      const sizeRatio = getSizeRatio();\n      const FIRST_EMPTY_DOT_SPACE = ONE_EMPTY_DOT_SIZE * 2;\n      const MOVE_DISTANCE = ONE_EMPTY_DOT_SIZE * sizeRatio;\n\n      const moveTo = Math.max(\n        0,\n        FIRST_EMPTY_DOT_SPACE + (index - 4) * MOVE_DISTANCE\n      );\n\n      if (props.vertical) {\n        refScrollView.current.scrollTo({\n          x: 0,\n          y: moveTo,\n          animated,\n        });\n        return;\n      }\n\n      refScrollView.current.scrollTo({\n        x: moveTo,\n        y: 0,\n        animated,\n      });\n    },\n    [getSizeRatio, props.vertical]\n  );\n\n  const getContainerStyle = useCallback<() => StyleProp<ViewStyle>>(() => {\n    const { vertical } = props;\n    const sizeRatio = getSizeRatio();\n    const containerSize = 84 * sizeRatio;\n\n    return {\n      alignItems: 'center',\n      flexDirection: vertical ? 'column' : 'row',\n      maxHeight: vertical ? containerSize : undefined,\n      maxWidth: vertical ? undefined : containerSize,\n    };\n  }, [getSizeRatio, props]);\n\n  useEffect(() => {\n    if (props.maxPage > 4 && prevPage !== props.curPage)\n      scrollTo(props.curPage);\n  }, [prevPage, props.curPage, props.maxPage, scrollTo]);\n\n  const { curPage, maxPage, activeDotColor, inactiveDotColor } = props;\n  const list = useMemo(() => [...Array(maxPage).keys()], [maxPage]);\n\n  let normalizedPage = curPage;\n  if (curPage < 0) {\n    normalizedPage = 0;\n  }\n\n  if (curPage > maxPage - 1) {\n    normalizedPage = maxPage - 1;\n  }\n  const sizeRatio = getSizeRatio();\n\n  const container = getContainerStyle();\n\n  if (maxPage < 5) {\n    return (\n      <View style={container}>\n        {list.map((i) => {\n          return (\n            <Dot\n              key={i}\n              idx={i}\n              sizeRatio={sizeRatio}\n              curPage={normalizedPage}\n              maxPage={maxPage}\n              activeColor={activeDotColor}\n              inactiveColor={inactiveDotColor}\n            />\n          );\n        })}\n      </View>\n    );\n  }\n\n  return (\n    <View\n      style={container}\n      onLayout={() => {\n        // scroll to right index on initial render\n        scrollTo(props.curPage, false);\n      }}\n    >\n      <ScrollView\n        ref={refScrollView}\n        contentContainerStyle={styles.scrollViewContainer}\n        bounces={false}\n        horizontal={!props.vertical}\n        scrollEnabled={false}\n        showsVerticalScrollIndicator={false}\n        showsHorizontalScrollIndicator={false}\n      >\n        {/* previous empty dummy dot */}\n        <EmptyDot sizeRatio={sizeRatio} />\n        <EmptyDot sizeRatio={sizeRatio} />\n\n        {list.map((i) => {\n          return (\n            <Dot\n              sizeRatio={sizeRatio}\n              key={i}\n              idx={i}\n              curPage={normalizedPage}\n              maxPage={maxPage}\n              activeColor={activeDotColor}\n              inactiveColor={inactiveDotColor}\n              onPress={props.onPress}\n            />\n          );\n        })}\n\n        {/* previous empty dummy dot */}\n        <EmptyDot sizeRatio={sizeRatio} />\n        <EmptyDot sizeRatio={sizeRatio} />\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  scrollViewContainer: {\n    alignItems: 'center',\n  },\n});\n\nexport default DotContainer;\n"],"mappings":"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","ignoreList":[]}